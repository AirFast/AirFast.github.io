import{r as l,j as e,u as p,e as h,T as N,U as y,f as R}from"./index-RulhGnuC.js";import{u as E,L as k,S as C}from"./Section-BkEuq3rL.js";import{u as T}from"./useQuery-C5cSQBwp.js";function M({title:r,titleId:s,...t},n){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},t),r?l.createElement("title",{id:s},r):null,l.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"}))}const O=l.forwardRef(M);function L({title:r,titleId:s,...t},n){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},t),r?l.createElement("title",{id:s},r):null,l.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const S=l.forwardRef(L),I=({isOpen:r,onClose:s,children:t})=>r?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-950",children:e.jsxs("div",{className:"relative w-full max-w-md p-6",children:[e.jsx("button",{type:"button",className:"absolute top-5 right-6 flex items-center justify-center w-8 h-8 ml-auto cursor-pointer bg-white text-slate-950 rounded-full duration-150 hover:text-white hover:bg-slate-500",onClick:s,children:e.jsx(S,{className:"w-3 h-3"})}),t]})}):null,U=({name:r,checked:s,children:t,disabled:n=!1,handleCheckboxChange:i})=>e.jsxs("label",{className:"inline-flex items-center cursor-pointer gap-4",children:[e.jsx("input",{type:"checkbox",name:r,className:"sr-only",checked:s,onChange:a=>i(a.target.checked),disabled:n}),e.jsx("div",{className:`relative w-4 h-4 flex shrink-0 items-center justify-center rounded-xs border-2 transition${s?" bg-white":""}`,children:s&&e.jsx("div",{className:"absolute w-3 h-1.5 border-b-2 border-l-2 -rotate-45 top-0.5 left-0 mix-blend-exclusion"})}),t&&e.jsx("span",{className:s?"line-through text-slate-500 transition":"transition",children:t})]}),F=({documentId:r,visited:s,number:t,notes:n})=>{const{t:i}=p(),[a,c]=l.useState(!1),[u,d]=l.useState(s),[x,b]=l.useState(n??""),m=l.useRef(null),[f]=E(y,{refetchQueries:[h,{query:N,variables:{locale:"uk"}}]}),g=async o=>{d(()=>o);try{await f({variables:{documentId:r,locale:"uk",data:{visited:o}}})}catch(v){console.error(v)}},j=()=>{c(!0),setTimeout(()=>{var o;(o=m.current)==null||o.focus()},0)},w=async()=>{try{await f({variables:{documentId:r,locale:"uk",data:{notes:x}}})}catch(o){console.error(o)}c(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("li",{className:"flex items-center md:px-4",children:[e.jsxs(U,{name:r,checked:u??!1,handleCheckboxChange:g,children:[t,". ",n]}),e.jsx("button",{type:"button",className:"flex items-center justify-center w-8 h-8 shrink-0 ml-auto cursor-pointer bg-white text-slate-950 rounded-full duration-150 hover:text-white hover:bg-slate-500",onClick:j,children:e.jsx(O,{className:"w-3 h-3"})})]}),e.jsx(I,{isOpen:a,onClose:()=>c(!1),children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("h2",{className:"text-lg",children:[i("notes"),": ",t]}),e.jsx("textarea",{ref:m,value:x,onChange:o=>b(o.target.value),className:"w-full p-2 bg-slate-900 rounded-xl resize-none",rows:4}),e.jsxs("div",{className:"flex justify-end gap-2 text-sm",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-4 pt-1.5 pb-2 border rounded-full cursor-pointer duration-200 hover:text-slate-500",children:i("cancel")}),e.jsx("button",{onClick:w,className:"px-4 pt-1.5 pb-2 border rounded-full cursor-pointer duration-200 bg-white text-slate-950 hover:text-white hover:bg-slate-500",children:i("save")})]})]})})]})},A=()=>{const{id:r}=R(),{t:s}=p(),{data:t,loading:n}=T(h,{variables:{locale:"uk",documentId:r,pagination:{limit:-1}}}),i=(t==null?void 0:t.territory.type)==="apartment_building";return n?e.jsx("main",{className:"flex-1 flex items-center justify-center",children:e.jsx(k,{loadingText:s("loading")})}):e.jsx("main",{className:"flex-1",children:e.jsxs(C,{children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("p",{className:"px-4 pt-0.5 pb-1 text-xs bg-white text-slate-950 rounded-full w-max",children:s(`${(t==null?void 0:t.territory.type)??"default"}`)}),e.jsx("p",{className:"text-2xl",children:t==null?void 0:t.territory.name})]}),e.jsx("ul",{className:"grid gap-4",children:t==null?void 0:t.territory.houses.map((a,c,u)=>{const d=u[c-1],x=!d||d.floor!==(a==null?void 0:a.floor);return e.jsxs(l.Fragment,{children:[i&&x&&e.jsxs("span",{className:"px-4 py-2 text-xs font-bold bg-slate-800 text-slate-300 rounded-full w-max",children:[s("floor"),": ",a==null?void 0:a.floor]}),a&&e.jsx(F,{...a})]},a==null?void 0:a.documentId)})})]})})};export{A as default};

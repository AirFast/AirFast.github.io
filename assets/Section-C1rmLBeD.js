import{h as v,l as D,i as E,t as O,v as z,w as F,x as G,_ as I,q as U,A as V,n as A,j as S}from"./index-Ctwemih6.js";function W(r){var t=v.useContext(D()),a=r||t.client;return E(!!a,58),a}var l;(function(r){r[r.Query=0]="Query",r[r.Mutation=1]="Mutation",r[r.Subscription=2]="Subscription"})(l||(l={}));var m;function L(r){var t;switch(r){case l.Query:t="Query";break;case l.Mutation:t="Mutation";break;case l.Subscription:t="Subscription";break}return t}function R(r){m||(m=new O(z.parser||1e3));var t=m.get(r);if(t)return t;var a,i,c;E(!!r&&!!r.kind,70,r);for(var f=[],e=[],s=[],d=[],n=0,M=r.definitions;n<M.length;n++){var o=M[n];if(o.kind==="FragmentDefinition"){f.push(o);continue}if(o.kind==="OperationDefinition")switch(o.operation){case"query":e.push(o);break;case"mutation":s.push(o);break;case"subscription":d.push(o);break}}E(!f.length||e.length||s.length||d.length,71),E(e.length+s.length+d.length<=1,72,r,e.length,d.length,s.length),i=e.length?l.Query:l.Mutation,!e.length&&!s.length&&(i=l.Subscription);var k=e.length?e:s.length?s:d;E(k.length===1,73,r,k.length);var h=k[0];a=h.variableDefinitions||[],h.name&&h.name.kind==="Name"?c=h.name.value:c="data";var g={name:c,type:i,variables:a};return m.set(r,g),g}R.resetCache=function(){m=void 0};globalThis.__DEV__!==!1&&F("parser",function(){return m?m.size:0});function x(r,t){var a=R(r),i=L(t),c=L(a.type);E(a.type===t,74,i,i,c)}var B=G?v.useLayoutEffect:v.useEffect;function J(r,t){var a=W(t==null?void 0:t.client);x(r,l.Mutation);var i=v.useState({called:!1,loading:!1,client:a}),c=i[0],f=i[1],e=v.useRef({result:c,mutationId:0,isMounted:!0,client:a,mutation:r,options:t});B(function(){Object.assign(e.current,{client:a,options:t,mutation:r})});var s=v.useCallback(function(n){n===void 0&&(n={});var M=e.current,o=M.options,k=M.mutation,h=I(I({},o),{mutation:k}),g=n.client||e.current.client;!e.current.result.loading&&!h.ignoreResults&&e.current.isMounted&&f(e.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:g});var Q=++e.current.mutationId,C=U(h,n);return g.mutate(C).then(function(u){var p,b,y=u.data,w=u.errors,j=w&&w.length>0?new V({graphQLErrors:w}):void 0,_=n.onError||((p=e.current.options)===null||p===void 0?void 0:p.onError);if(j&&_&&_(j,C),Q===e.current.mutationId&&!C.ignoreResults){var q={called:!0,loading:!1,data:y,error:j,client:g};e.current.isMounted&&!A(e.current.result,q)&&f(e.current.result=q)}var N=n.onCompleted||((b=e.current.options)===null||b===void 0?void 0:b.onCompleted);return j||N==null||N(u.data,C),u},function(u){var p;if(Q===e.current.mutationId&&e.current.isMounted){var b={loading:!1,error:u,data:void 0,called:!0,client:g};A(e.current.result,b)||f(e.current.result=b)}var y=n.onError||((p=e.current.options)===null||p===void 0?void 0:p.onError);if(y)return y(u,C),{data:void 0,errors:u};throw u})},[]),d=v.useCallback(function(){if(e.current.isMounted){var n={called:!1,loading:!1,client:e.current.client};Object.assign(e.current,{mutationId:0,result:n}),f(n)}},[]);return v.useEffect(function(){var n=e.current;return n.isMounted=!0,function(){n.isMounted=!1}},[]),[s,I({reset:d},c)]}const K=({loadingText:r})=>S.jsxs("div",{className:"grid gap-6 justify-items-center",children:[S.jsx("div",{className:"w-14 h-14 border-4 border-white border-t-transparent rounded-full animate-spin"}),(r==null?void 0:r.length)&&S.jsx("span",{className:"text-xs",children:r})]}),P=({children:r})=>S.jsx("section",{className:"flex flex-col gap-12",children:r});export{l as D,K as L,P as S,W as a,J as u,x as v};

import{d as R,u as z,a as re,r as T,b as de,o as _,c as h,e as r,w as pe,v as ve,f as i,g as D,h as x,F as S,i as J,t as l,n as P,j as b,k as M,l as C,T as me,_ as Y,m as Q,p as W,q as _e,s as he,x as fe,y as ye,z as ie,A as ee,C as Ce,B as ge,S as we}from"./index-m8GlVv3w.js";import{r as te,M as ke,a as O,t as U,b as X,c as De,d as xe,e as I,L as K,f as Ne,W as Te,g as V}from"./WeatherCard-iyDA3h07.js";const $e={class:"autocomplete-container"},be={class:"autocomplete"},Me=["placeholder"],Ie={key:1,class:"autocomplete-list"},Oe=["onClick"],He={key:0,class:"search-history"},Se={class:"title"},We=["onClick"],Ue=["onClick"],Fe=R({__name:"AutocompleteInput",setup(s){const{t:e}=z(),t=re(),a=T(!1),o=T(!1),n=T(""),d=T([]),u=async()=>{if(n.value.length<3)return;const p=await(await fetch(`https://api.openweathermap.org/data/2.5/find?q=${n.value}&type=like&sort=population&cnt=5&appid=4e41937f042aed15531c7704bd751436`)).json();if(p.cod===400)return;const w=p.list;o.value=w.length!==0,d.value=w},v=c=>{n.value=c.name,t.value.city=c.name,t.value.countryCode=c.sys.country,o.value=!1,!t.value.searchHistory.map(({city:p})=>p).includes(c.name)&&(t.value.searchHistory.length>=5&&t.value.searchHistory.pop(),t.value.searchHistory=[{city:c.name,countryCode:c.sys.country},...t.value.searchHistory])},m=()=>{if(t.value.favorites.length>=5){y(),n.value="";return}if(t.value.favorites.includes(n.value)){n.value="";return}t.value.favorites=[n.value,...t.value.favorites],n.value=""},y=()=>{a.value=!0},N=()=>{a.value=!1},Z=({city:c,countryCode:p})=>{t.value.city=c,t.value.countryCode=p,n.value=""},j=c=>{t.value.searchHistory=t.value.searchHistory.filter(({city:p})=>p!==c)};return(c,p)=>{const w=de("RouterLink");return _(),h(S,null,[r("div",$e,[r("div",be,[pe(r("input",{class:"autocomplete-input","onUpdate:modelValue":p[0]||(p[0]=f=>n.value=f),onInput:u,placeholder:i(e)("typeCity")},null,40,Me),[[ve,n.value]]),n.value?(_(),h("span",{key:0,class:"clear",onClick:p[1]||(p[1]=()=>n.value="")},[D(i(te))])):x("",!0),o.value?(_(),h("ul",Ie,[(_(!0),h(S,null,J(d.value,f=>(_(),h("li",{class:"autocomplete-item",onClick:$=>v(f)},l(f.name)+", "+l(f.sys.country),9,Oe))),256))])):x("",!0)]),n.value?(_(),h("button",{key:0,class:"favorites-btn",onClick:m},l(i(e)("favoritesBtn")),1)):x("",!0)]),i(t).searchHistory.length!==0?(_(),h("div",He,[r("span",Se,l(i(e)("searchHistory"))+":",1),(_(!0),h(S,null,J(i(t).searchHistory,({city:f,countryCode:$})=>(_(),h("div",{class:"history-item",key:f},[r("button",{class:P(["history-item",{active:f===i(t).city}]),onClick:g=>Z({city:f,countryCode:$})},l(f)+", "+l($),11,We),r("span",{class:"clear",onClick:g=>j(f)},[D(i(te))],8,Ue)]))),128))])):x("",!0),(_(),b(me,{to:"body"},[D(i(ke),{isOpen:a.value,onClose:N,name:"first-modal"},{header:M(()=>[C(l(i(e)("note")),1)]),content:M(()=>[r("p",null,l(i(e)("favoritesNote")),1)]),footer:M(()=>[D(w,{to:{name:"favorites"}},{default:M(()=>[C(l(i(e)("viewFavorites")),1)]),_:1})]),_:1},8,["isOpen"])]))],64)}}}),Re=Y(Fe,[["__scopeId","data-v-d7ec1d5a"]]);function oe(s,e){O(2,arguments);var t=U(s),a=X(e);return isNaN(a)?new Date(NaN):(a&&t.setDate(t.getDate()+a),t)}var Le=36e5;function Ae(s,e){O(2,arguments);var t=X(e);return De(s,t*Le)}var le=6e4,ce=36e5;function F(s){O(1,arguments);var e=U(s),t=e.getHours();return t}function Ve(s){O(1,arguments);var e=U(s),t=e.getMinutes();return t}function ae(s,e){O(2,arguments);var t=U(s),a=U(e);return t.getTime()>a.getTime()}function k(s,e){var t;O(1,arguments);var a=X((t=e==null?void 0:e.additionalDigits)!==null&&t!==void 0?t:2);if(a!==2&&a!==1&&a!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof s=="string"||Object.prototype.toString.call(s)==="[object String]"))return new Date(NaN);var o=Ze(s),n;if(o.date){var d=je(o.date,a);n=Ee(d.restDateString,d.year)}if(!n||isNaN(n.getTime()))return new Date(NaN);var u=n.getTime(),v=0,m;if(o.time&&(v=Ge(o.time),isNaN(v)))return new Date(NaN);if(o.timezone){if(m=qe(o.timezone),isNaN(m))return new Date(NaN)}else{var y=new Date(u+v),N=new Date(0);return N.setFullYear(y.getUTCFullYear(),y.getUTCMonth(),y.getUTCDate()),N.setHours(y.getUTCHours(),y.getUTCMinutes(),y.getUTCSeconds(),y.getUTCMilliseconds()),N}return new Date(u+v+m)}var L={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},ze=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Ye=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Be=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Ze(s){var e={},t=s.split(L.dateTimeDelimiter),a;if(t.length>2)return e;if(/:/.test(t[0])?a=t[0]:(e.date=t[0],a=t[1],L.timeZoneDelimiter.test(e.date)&&(e.date=s.split(L.timeZoneDelimiter)[0],a=s.substr(e.date.length,s.length))),a){var o=L.timezone.exec(a);o?(e.time=a.replace(o[1],""),e.timezone=o[1]):e.time=a}return e}function je(s,e){var t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),a=s.match(t);if(!a)return{year:NaN,restDateString:""};var o=a[1]?parseInt(a[1]):null,n=a[2]?parseInt(a[2]):null;return{year:n===null?o:n*100,restDateString:s.slice((a[1]||a[2]).length)}}function Ee(s,e){if(e===null)return new Date(NaN);var t=s.match(ze);if(!t)return new Date(NaN);var a=!!t[4],o=H(t[1]),n=H(t[2])-1,d=H(t[3]),u=H(t[4]),v=H(t[5])-1;if(a)return Xe(e,u,v)?Je(e,u,v):new Date(NaN);var m=new Date(0);return!Ke(e,n,d)||!Qe(e,o)?new Date(NaN):(m.setUTCFullYear(e,n,Math.max(o,d)),m)}function H(s){return s?parseInt(s):1}function Ge(s){var e=s.match(Ye);if(!e)return NaN;var t=E(e[1]),a=E(e[2]),o=E(e[3]);return et(t,a,o)?t*ce+a*le+o*1e3:NaN}function E(s){return s&&parseFloat(s.replace(",","."))||0}function qe(s){if(s==="Z")return 0;var e=s.match(Be);if(!e)return 0;var t=e[1]==="+"?-1:1,a=parseInt(e[2]),o=e[3]&&parseInt(e[3])||0;return tt(a,o)?t*(a*ce+o*le):NaN}function Je(s,e,t){var a=new Date(0);a.setUTCFullYear(s,0,4);var o=a.getUTCDay()||7,n=(e-1)*7+t+1-o;return a.setUTCDate(a.getUTCDate()+n),a}var Pe=[31,null,31,30,31,30,31,31,30,31,30,31];function ue(s){return s%400===0||s%4===0&&s%100!==0}function Ke(s,e,t){return e>=0&&e<=11&&t>=1&&t<=(Pe[e]||(ue(s)?29:28))}function Qe(s,e){return e>=1&&e<=(ue(s)?366:365)}function Xe(s,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function et(s,e,t){return s===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&s>=0&&s<25}function tt(s,e){return e>=0&&e<=59}const B=s=>(_e("data-v-e885cce9"),s=s(),he(),s),at={key:0,class:"container"},st={class:"item weather-main-data"},nt={class:"weather-icon"},rt=["src","alt"],it={class:"temperature"},ot={class:"description"},lt={class:"current"},ct=B(()=>r("span",null,"°C",-1)),ut={class:"feels-like"},dt=B(()=>r("span",null,"°C",-1)),pt={class:"item weather-lists"},vt={class:"weather-data-list"},mt={class:"list-item-description"},_t=B(()=>r("span",null,"°C",-1)),ht={class:"list-item-description"},ft=B(()=>r("span",null,"°C",-1)),yt={class:"list-item-description"},Ct={class:"weather-data-list"},gt={class:"list-item-description"},wt={class:"list-item-description"},kt={class:"list-item-description"},Dt={class:"weather-data-list"},xt={class:"list-item-description"},Nt={class:"list-item-description"},Tt={class:"list-item-description"},$t=R({__name:"WeatherCardCurrentDay",setup(s){const{t:e}=z(),{data:t}=Q("https://api.openweathermap.org/data/2.5/weather"),a=W(()=>JSON.parse(t.value)),o=n=>{const d=Ne(n);return`${F(d)}:${Ve(d)}`};return(n,d)=>{var u,v,m;return a.value?(_(),h("article",at,[r("div",st,[r("div",nt,[r("img",{src:`https://openweathermap.org/img/wn/${(u=a.value.weather.at(0))==null?void 0:u.icon}@4x.png`,alt:(v=a.value.weather.at(0))==null?void 0:v.description},null,8,rt)]),r("div",it,[r("span",ot,l(i(xe)((m=a.value.weather.at(0))==null?void 0:m.description)),1),r("span",lt,[C(l(i(I)(a.value.main.temp).toFixed(0))+" ",1),ct]),r("span",ut,[C(l(i(e)("feelsLike"))+": "+l(i(I)(a.value.main.feels_like).toFixed(0))+" ",1),dt])])]),r("div",pt,[r("ul",vt,[r("li",null,[r("span",mt,l(i(e)("minT"))+":",1),C(" "+l(i(I)(a.value.main.temp_min).toFixed(0))+" ",1),_t]),r("li",null,[r("span",ht,l(i(e)("maxT"))+":",1),C(" "+l(i(I)(a.value.main.temp_max).toFixed(0))+" ",1),ft]),r("li",null,[r("span",yt,l(i(e)("cloudiness"))+":",1),C(" "+l(a.value.clouds.all)+" % ",1)])]),r("ul",Ct,[r("li",null,[r("span",gt,l(i(e)("visibility"))+":",1),C(" "+l(a.value.visibility/1e3)+" "+l(i(e)("km")),1)]),r("li",null,[r("span",wt,l(i(e)("wind"))+":",1),C(" "+l(a.value.wind.speed)+" "+l(i(e)("ms")),1)]),r("li",null,[r("span",kt,l(i(e)("humidity"))+":",1),C(" "+l(a.value.main.humidity)+" % ",1)])]),r("ul",Dt,[r("li",null,[r("span",xt,l(i(e)("pressure"))+":",1),C(" "+l(a.value.main.pressure)+" "+l(i(e)("hPa")),1)]),r("li",null,[r("span",Nt,l(i(e)("sunrise"))+":",1),C(" "+l(o(a.value.sys.sunrise)),1)]),r("li",null,[r("span",Tt,l(i(e)("sunset"))+":",1),C(" "+l(o(a.value.sys.sunset)),1)])])])])):(_(),b(i(K),{key:1}))}}}),bt=Y($t,[["__scopeId","data-v-e885cce9"]]),Mt={class:"weather-list container"},It=R({__name:"WeatherCurrentWeek",async setup(s){let e,t;const{data:a}=([e,t]=fe(()=>Q("https://api.openweathermap.org/data/2.5/forecast").json()),e=await e,t(),e),o=W(()=>{var v,m;const n=(v=a.value)==null?void 0:v.list,d=k((m=n==null?void 0:n.at(0))==null?void 0:m.dt_txt),u=F(d);return n==null?void 0:n.filter(y=>u===F(k(y.dt_txt)))});return(n,d)=>(_(),h("div",Mt,[(_(!0),h(S,null,J(o.value,u=>{var v,m;return _(),h("div",{class:"item",key:u.dt},[D(i(Te),{dt:new Date(u.dt_txt),icon:(v=u.weather.at(0))==null?void 0:v.icon,description:(m=u.weather.at(0))==null?void 0:m.description,temp:u.main.temp,feelsLike:u.main.feels_like,tempMin:u.main.temp_min,tempMax:u.main.temp_max,clouds:u.clouds.all,visibility:u.visibility,windSpeed:u.wind.speed,humidity:u.main.humidity,pressure:u.main.pressure},null,8,["dt","icon","description","temp","feelsLike","tempMin","tempMax","clouds","visibility","windSpeed","humidity","pressure"])])}),128))]))}}),Ot=Y(It,[["__scopeId","data-v-24142efd"]]),G="#fff",se="#4ade80",q="#0f172e",ne="#334155",A="#f8fafc",Ht=R({__name:"WeatherChart",props:{isTodayWeatherView:{type:Boolean}},setup(s){const e=s,{t}=z(),{data:a}=Q("https://api.openweathermap.org/data/2.5/forecast"),o=W(()=>{var $;const c=JSON.parse(a.value),p=k(($=c==null?void 0:c.list[0])==null?void 0:$.dt_txt),w=oe(Ae(p,6),1),f=F(p);return e.isTodayWeatherView?c==null?void 0:c.list.filter(g=>ae(k(g.dt_txt),p)&&ae(w,k(g.dt_txt))).map(g=>({data:Number(I(g.main.temp)),labels:V(k(g.dt_txt),"eee, dd / HH:mm")})):c==null?void 0:c.list.filter(g=>f===F(k(g.dt_txt))).map(g=>({data:Number(I(g.main.temp)),labels:V(k(g.dt_txt),"MMMM, dd")}))}),{isDark:n}=ye();let d=null;const u=T(),v=T(),m={labels:[],datasets:[{label:"",borderColor:se,borderWidth:2,data:[],pointBackgroundColor:se,fill:!0,backgroundColor:n.value?ne:A}]},y={responsive:!0,maintainAspectRatio:!1,scales:{x:{grid:{display:!1},ticks:{color:n.value?G:q},border:{width:2,color:A}},y:{grid:{display:!1},ticks:{},border:{width:2,color:A},title:{display:!0,text:"Degrees Celsius, °C"}}}},N=()=>{if(!v.value)return;const c=v.value;d=new Ce(c,{type:"line",data:m,options:y})},Z=()=>{var c;d&&(d.data.labels=(c=o.value)==null?void 0:c.map(({labels:p})=>p),d.data.datasets=d.data.datasets.map(p=>{var w;return{...p,label:e.isTodayWeatherView?t("today"):t("next5Days"),data:(w=o.value)==null?void 0:w.map(({data:f})=>f)}}),d.update())},j=()=>{var c,p;d&&(d.data.datasets=m.datasets.map(w=>({...w,backgroundColor:n.value?ne:A})),d.options.scales={x:{...(c=d.options.scales)==null?void 0:c.x,ticks:{color:n.value?G:q}},y:{...(p=d.options.scales)==null?void 0:p.y,ticks:{color:n.value?G:q}}},d.update())};return ie(()=>{var c;v.value=((c=u.value)==null?void 0:c.getContext("2d"))||void 0,N()}),ee(()=>o.value,()=>{Z()}),ee(()=>n.value,()=>{j()}),(c,p)=>(_(),h("canvas",{ref_key:"lineChart",ref:u,class:"canvas",height:"300"},null,512))}}),St={class:"autocomplete-data"},Wt={key:0,class:"main-data"},Ut={class:"period"},Ft={class:"weather-view-switcher"},Rt={key:0,class:"weather-data"},Lt={key:1},At=R({__name:"HomePage",setup(s){const{t:e}=z(),t=re(),a=W(()=>t.value.city===""&&t.value.countryCode==="");ie(()=>{a.value&&ge()});const o=new Date,n=T(!0),d=W(()=>{const m=V(o,"MMMM dd, yyyy");return n.value?m:`${m} - ${V(oe(o,4),"MMMM dd, yyyy")}`}),u=()=>n.value=!0,v=()=>n.value=!1;return(m,y)=>(_(),h(S,null,[r("section",St,[D(i(Re))]),a.value?x("",!0):(_(),h("section",Wt,[r("article",null,[r("span",Ut,l(d.value),1),r("h2",null,l(i(t).city)+", "+l(i(t).countryCode),1)]),r("div",Ft,[r("button",{class:P({"is-active":n.value}),onClick:u},l(i(e)("today")),3),r("button",{class:P({"is-active":!n.value}),onClick:v},l(i(e)("next5Days")),3)])])),(_(),b(we,null,{default:M(()=>[a.value?x("",!0):(_(),h("section",Rt,[n.value?(_(),b(i(bt),{key:0})):(_(),b(i(Ot),{key:1}))]))]),fallback:M(()=>[D(i(K))]),_:1})),a.value?x("",!0):(_(),h("section",Lt,[D(i(Ht),{"is-today-weather-view":n.value},null,8,["is-today-weather-view"])])),a.value?(_(),b(i(K),{key:2})):x("",!0)],64))}}),Yt=Y(At,[["__scopeId","data-v-1f96adf4"]]);export{Yt as default};

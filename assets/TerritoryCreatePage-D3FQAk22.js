import{u as g,j as e,b as R,r as y,C as A,T as C,d as I}from"./index-RulhGnuC.js";import{u as f,L as H,S as O}from"./Section-BkEuq3rL.js";const k=({territoryCreateFormData:r,handleChange:a,handleSubmit:c})=>{const{t}=g();return e.jsx("div",{children:e.jsxs("form",{onSubmit:c,className:"grid gap-8",children:[e.jsxs("label",{htmlFor:"name",className:"grid gap-2",children:[t("territoryName"),e.jsx("input",{type:"text",name:"name",id:"name",required:!0,minLength:5,className:"bg-slate-900 w-max pl-3 py-2 rounded",value:r.name,onChange:a})]}),e.jsxs("label",{htmlFor:"floors",className:"grid gap-2",children:[t("numberOfFloors"),e.jsx("input",{type:"number",name:"floors",id:"floors",min:"1",className:"bg-slate-900 w-max pl-3 py-2 rounded",value:r.floors,onChange:a})]}),e.jsxs("label",{htmlFor:"houses",className:"grid gap-2",children:[t("numberPerFloor"),e.jsx("input",{type:"number",name:"houses",id:"houses",min:"1",className:"bg-slate-900 w-max pl-3 py-2 rounded",value:r.houses,onChange:a})]}),e.jsxs("label",{htmlFor:"startNumber",className:"grid gap-2",children:[t("countingFromApartment"),e.jsx("input",{type:"number",name:"startNumber",id:"startNumber",min:"1",className:"bg-slate-900 w-max pl-3 py-2 rounded",value:r.startNumber,onChange:a})]}),e.jsx("button",{type:"submit",className:"w-max px-4 pt-1.5 pb-2 rounded-full cursor-pointer duration-200 bg-white text-slate-950 hover:text-white hover:bg-slate-500",children:t("create")})]})})},P=({territoryCreateFormData:r,handleChange:a,handleSubmit:c})=>{const{t}=g();return e.jsx("div",{children:e.jsxs("form",{onSubmit:c,className:"grid gap-8",children:[e.jsxs("label",{htmlFor:"name",className:"grid gap-2",children:[t("territoryName"),e.jsx("input",{type:"text",name:"name",id:"name",required:!0,minLength:5,className:"bg-slate-900 w-max pl-3 py-2 rounded",value:r.name,onChange:a})]}),e.jsxs("label",{htmlFor:"houses",className:"grid gap-2",children:[t("numberOfHouses"),e.jsx("input",{type:"number",name:"houses",id:"houses",min:"1",className:"bg-slate-900 w-max pl-3 py-2 rounded",value:r.houses,onChange:a})]}),e.jsxs("label",{htmlFor:"startNumber",className:"grid gap-2",children:[t("countingFromHouse"),e.jsx("input",{type:"number",name:"startNumber",id:"startNumber",min:"1",className:"bg-slate-900 w-max pl-3 py-2 rounded",value:r.startNumber,onChange:a})]}),e.jsx("button",{type:"submit",className:"w-max px-4 pt-1.5 pb-2 rounded-full cursor-pointer duration-200 bg-white text-slate-950 hover:text-white hover:bg-slate-500",children:t("create")})]})})},j={ApartmentBuilding:"apartment_building",PrivateHouses:"private_houses"},L=()=>{const{t:r}=g(),a=R(),[c]=f(I,{refetchQueries:[{query:C,variables:{locale:"uk"}}]}),[t,{loading:v}]=f(A),x=[j.ApartmentBuilding,j.PrivateHouses],[d,T]=y.useState(x[0]),[s,w]=y.useState({name:"",floors:1,houses:1,startNumber:1}),N=o=>{const{name:n,value:u}=o.target;w(m=>({...m,[n]:n==="name"?u:Number(u)}))},S=async o=>{var n,u,m,p;o.preventDefault();try{const l=await c({variables:{locale:"uk",data:{type:d,name:s.name}}});for(let i=1;i<=s.floors;i++)for(let b=0;b<s.houses;b++){const h=s.startNumber+(i-1)*s.houses+b,_={floor:i,number:`${h}`};await t({variables:{locale:"uk",data:{territory:(u=(n=l.data)==null?void 0:n.createTerritory)==null?void 0:u.documentId,..._}}})}a(`/territory/${(p=(m=l.data)==null?void 0:m.createTerritory)==null?void 0:p.documentId}`)}catch(l){console.error(l)}},E=async o=>{var n,u,m,p;o.preventDefault();try{const l=await c({variables:{locale:"uk",data:{type:d,name:s.name}}});for(let i=0;i<s.houses;i++){const h={number:`${s.startNumber+i}`};console.log(d,h),await t({variables:{locale:"uk",data:{territory:(u=(n=l.data)==null?void 0:n.createTerritory)==null?void 0:u.documentId,...h}}})}a(`/territory/${(p=(m=l.data)==null?void 0:m.createTerritory)==null?void 0:p.documentId}`)}catch(l){console.error(l)}},F={apartment_building:e.jsx(k,{territoryCreateFormData:s,handleChange:N,handleSubmit:S}),private_houses:e.jsx(P,{territoryCreateFormData:s,handleChange:N,handleSubmit:E})};return v?e.jsx("main",{className:"flex-1 flex items-center justify-center",children:e.jsx(H,{loadingText:"Створення території..."})}):e.jsx("main",{className:"flex-1",children:e.jsxs(O,{children:[e.jsx("div",{className:"flex gap-2 text-xs",children:x.map((o,n)=>e.jsx("button",{onClick:()=>T(x[n]),className:`px-4 py-2 border rounded-full transition ${d===o?"bg-white text-slate-950":"cursor-pointer hover:text-slate-500"}`,children:r(o)},o))}),F[d]]})})};export{L as default};

import{u as y,j as e,b as I,r as j,C as q,T as H,d as O}from"./index-Ctwemih6.js";import{u as v,L as k,S as P}from"./Section-C1rmLBeD.js";const $=({territoryCreateFormData:a,handleChange:r,handleSubmit:m})=>{const{t}=y();return e.jsx("div",{children:e.jsxs("form",{onSubmit:m,className:"grid gap-8",children:[e.jsxs("label",{htmlFor:"name",className:"grid gap-2",children:[t("territoryName"),e.jsx("input",{type:"text",name:"name",id:"name",required:!0,minLength:5,className:"bg-slate-900 w-max pl-3 py-2 rounded",value:a.name,onChange:r})]}),e.jsxs("label",{htmlFor:"floors",className:"grid gap-2",children:[t("numberOfFloors"),e.jsx("input",{type:"number",name:"floors",id:"floors",min:"1",required:!0,className:"bg-slate-900 w-max pl-3 py-2 rounded",value:a.floors,onChange:r})]}),e.jsxs("label",{htmlFor:"houses",className:"grid gap-2",children:[t("numberPerFloor"),e.jsx("input",{type:"number",name:"houses",id:"houses",min:"1",required:!0,className:"bg-slate-900 w-max pl-3 py-2 rounded",value:a.houses,onChange:r})]}),e.jsxs("label",{htmlFor:"startNumber",className:"grid gap-2",children:[t("countingFromApartment"),e.jsx("input",{type:"number",name:"startNumber",id:"startNumber",min:"1",required:!0,className:"bg-slate-900 w-max pl-3 py-2 rounded",value:a.startNumber,onChange:r})]}),e.jsx("button",{type:"submit",className:"w-max px-4 pt-1.5 pb-2 rounded-full cursor-pointer duration-200 bg-white text-slate-950 hover:text-white hover:bg-slate-500",children:t("create")})]})})},B=({territoryCreateFormData:a,handleChange:r,handleSubmit:m})=>{const{t}=y();return e.jsx("div",{children:e.jsxs("form",{onSubmit:m,className:"grid gap-8",children:[e.jsxs("label",{htmlFor:"name",className:"grid gap-2",children:[t("territoryName"),e.jsx("input",{type:"text",name:"name",id:"name",required:!0,minLength:5,className:"bg-slate-900 w-max pl-3 py-2 rounded",value:a.name,onChange:r})]}),e.jsxs("label",{htmlFor:"houses",className:"grid gap-2",children:[t("numberOfHouses"),e.jsx("input",{type:"number",name:"houses",id:"houses",min:"1",required:!0,className:"bg-slate-900 w-max pl-3 py-2 rounded",value:a.houses,onChange:r})]}),e.jsxs("label",{htmlFor:"startNumber",className:"grid gap-2",children:[t("countingFromHouse"),e.jsx("input",{type:"number",name:"startNumber",id:"startNumber",min:"1",required:!0,className:"bg-slate-900 w-max pl-3 py-2 rounded",value:a.startNumber,onChange:r})]}),e.jsx("button",{type:"submit",className:"w-max px-4 pt-1.5 pb-2 rounded-full cursor-pointer duration-200 bg-white text-slate-950 hover:text-white hover:bg-slate-500",children:t("create")})]})})},T={ApartmentBuilding:"apartment_building",PrivateHouses:"private_houses"},M=()=>{const{t:a}=y(),r=I(),[m]=v(O,{refetchQueries:[{query:H,variables:{locale:"uk"}}]}),[t,{loading:w}]=v(q),g=[T.ApartmentBuilding,T.PrivateHouses],[h,S]=j.useState(g[0]),[n,E]=j.useState({name:"",floors:"",houses:"",startNumber:""}),f=o=>{const{name:s,value:l}=o.target;E(i=>({...i,[s]:s==="name"?l:Number(l)}))},F=async o=>{var s,l,i,c;o.preventDefault();try{const u=await m({variables:{locale:"uk",data:{type:h,name:n.name}}}),N=Number(n.floors),x=Number(n.houses),d=Number(n.startNumber);for(let p=1;p<=N;p++)for(let b=0;b<x;b++){const A=d+(p-1)*x+b,C={floor:p,number:`${A}`};await t({variables:{locale:"uk",data:{territory:(l=(s=u.data)==null?void 0:s.createTerritory)==null?void 0:l.documentId,...C}}})}r(`/territory/${(c=(i=u.data)==null?void 0:i.createTerritory)==null?void 0:c.documentId}`)}catch(u){console.error(u)}},_=async o=>{var s,l,i,c;o.preventDefault();try{const u=await m({variables:{locale:"uk",data:{type:h,name:n.name}}}),N=Number(n.houses),x=Number(n.startNumber);for(let d=0;d<N;d++){const b={number:`${x+d}`};await t({variables:{locale:"uk",data:{territory:(l=(s=u.data)==null?void 0:s.createTerritory)==null?void 0:l.documentId,...b}}})}r(`/territory/${(c=(i=u.data)==null?void 0:i.createTerritory)==null?void 0:c.documentId}`)}catch(u){console.error(u)}},R={apartment_building:e.jsx($,{territoryCreateFormData:n,handleChange:f,handleSubmit:F}),private_houses:e.jsx(B,{territoryCreateFormData:n,handleChange:f,handleSubmit:_})};return w?e.jsx("main",{className:"flex-1 flex items-center justify-center",children:e.jsx(k,{loadingText:"Створення території..."})}):e.jsx("main",{className:"flex-1",children:e.jsxs(P,{children:[e.jsx("div",{className:"flex gap-2 text-xs",children:g.map((o,s)=>e.jsx("button",{onClick:()=>S(g[s]),className:`px-4 py-2 border rounded-full transition ${h===o?"bg-white text-slate-950":"cursor-pointer hover:text-slate-500"}`,children:a(o)},o))}),R[h]]})})};export{M as default};
